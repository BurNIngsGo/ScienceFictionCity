<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="/ScienceFictionCity/styleFile/viddw.css" />

		<!--<link rel="stylesheet" href="dfd.css" />-->
		<script>
			
		</script>
		<style>
			body {
				overflow-x: hidden;
				background-color: #F1F3F5;
			}
			.selects{
				width: 100px;
				border-radius: 25px 25px 25px 25px;
				outline: none;
				margin-left: -15px;
			}
		</style>
	</head>

	<body>
		<div class="menus">
			<div id="menucon">
				<div class="dianda">
					<a class="ass" href="index1.html">首页</a>
				</div>
				<div class="dianda">
					<a class="ass" href="index3.html">商城</a>
				</div>
				<div class="dianda">
					<a class="ass" href="index4.html">排行</a>
				</div>
				<div class="dianda">
					<a class="ass" href="/ScienceFictionCity/webPage/newBook.html">最新</a>
				</div>
				<div class="dianda">
					<a class="ass" href="/ScienceFictionCity/S2pr/readmain.html">阅读</a>
				</div>
			</div>
		</div>					
	
		
		<div class="selector-wrapper">
			<div class="wrapper city-selector-wrapper">
				<div class="title">
					<span class="ftit">科幻类型</span>
				</div>
				<div class="selector-content">
					<ul class="city-list">
						<li class='city-item'>全部</li>
					</ul>
				</div>
			</div>
			<div class="wrapper city-selector-wrapper">
				<div class="title">出版社</div>
				<div class="selector-content">
					<ul class="city-list">
						<li class='city-item'>全部</li>
					</ul>
				</div>
			</div>
			<div class="wrapper city-selector-wrapper">
				<div class="title">出版时间</div>
				<div class="selector-content">
					<ul class="city-list">
						<li class="city-item">全部</li>
						<li class="city-item">1990-1995</li>
						<li class="city-item">1996-2000</li>
						<li class="city-item">2001-2005</li>
						<li class="city-item">2006-2010</li>
						<li class="city-item">2011-2015</li>
						<li class="city-item">2016-2020</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="project-list-wrapper">
			<div class="project-list">
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price" >
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price">
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price">
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price">
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price">
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price">
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price">
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
				<div class="project-list-item" style="display: none">
					<div class="project-list-item-img"></div>
					<div class="project-list-item-detail">
						<div class="project-list-item-title">三体</div>
						<div class="project-list-item-time">
							<span class="icon time-icon"></span>
							作者：刘慈欣
						</div>
						<div class="project-list-item-address">
							<span class="icon address-icon"></span>
							<span class="venue-name-and-address">重庆出版社</span>
						</div>
						<div class="project-list-item-price">
							<div class="not-free">
								<span class="price-symbol">￥</span>
								<span class="price">30.6</span>
								<span class="start">元</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="pageSpan">
			<div class="pageSpanCenter">
				<div class="pageLeft">&lt;</div>
				<div class="pagination">
				</div>
				<div class="pageRight">&gt;</div>
			</div>
		</div>
		<script src="/ScienceFictionCity/javaScript/jquery-3.4.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var countP = 0;
			function bookTypeFun(){
				$(".city-list:eq(0)").append($("<select class='selects'></select>"));
				$.ajax({
					type:"get",
					data:{name:"shopType"},
					url:"/ScienceFictionCity/Tests",
					dataType:"json",
					success:function(data) {
						var i = 0;
						$(data).each(function(){
							if(i >= 6)
								$(".city-list:eq(0) .selects").append($("<option>"+this.tname+"</option>"));
							else
								$(".city-list:eq(0) .selects").before($("<li class='first city-item'>"+this.tname+"</li>"));
							// $(".city-list:eq(2)").append($("<li class='first city-item'>"+data.tbtime+"</li>"));
							i++;
						})
					},
					error:function(){
						alert("出问题啦！");
					}
				})
			}

			function pressFun() {
				$(".city-list:eq(1)").append($("<select class='selects'></select>"));
				$.ajax({
					type:"get",
					data:{name:"shopPree"},
					url:"/ScienceFictionCity/Tests",
					dataType:"json",
					success:function(data) {
						var i = 0;
						$(data).each(function(){
							if(i >= 6)
								$(".city-list:eq(1) .selects").append($("<option>"+this.tpree+"</option>"));
							else
								$(".city-list:eq(1) .selects").before($("<li class='first city-item'>"+this.tpree+"</li>"));
							i++;
						})
					},
					error:function(a,b,c){
						alert("出问题啦！"+a+","+b+","+c);
					}
				})
			}

			function pageFun(num){
				$.ajax({
					type:"get",
					url:"/ScienceFictionCity/Tests",
					data:{name:"bookShInfo",index:num},
					dataType:"json",
					success:function(data){
						var i = 0;
						$(data).each(function(){
							$(".project-list-item:eq("+i+")").fadeIn(100);
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-img").css("background-image","url(/ScienceFictionCity/image/"+this.bimg+")");
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-title").html(this.bName);
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-time").text(this.author);
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-address").html(this.press);
							$(".project-list-wrapper .project-list-item:eq("+i+") .price").html(this.price);
							i++;
						})
					},
					error:function(a,b,c){
						alert("FBI WARING"+b+","+c);
					}
				})
			}

			function pageCountFun(){
				$.ajax({
					type: "get",
					url: "/ScienceFictionCity/Tests",
					data: {name: "pageNum"},
					dataType: "text",
					success: function (data) {
						var pageCount = parseInt(data);
						countP = pageCount;
						if(pageCount >= 7) {
							$(".pagination").append("<span class=\"pageNum\">" + 1 + "</span>");
							for (var j = 1; j < 3; j++)
								$(".pagination").append("<span class=\"pageNum\">" + (j + 1) + "</span>");
							$(".pagination").append("<span class=\"pageNum\">" + "..." + "</span>");
							$(".pagination").append("<span class=\"pageNum\">" + pageCount + "</span>");
						}else{
							for (var j = 0; j < pageCount; j++)
								$(".pagination").append("<span class=\"pageNum\">" + (j + 1) + "</span>");
						}
					},
					error:function () {
						alert("fbi waring!!");
					}
				})
			}

			function selectBook(bType,bPress,bTime,eTime){
				$.ajax({
					type:"get",
					url:"/ScienceFictionCity/Tests",
					data:{type:bType,press:bPress,btime:bTime,etime:eTime,name:"selects"},
					dataType:"json",
					success:function(data){
						var i = 0;
						$(data).each(function(){
							$(".project-list-item:eq("+i+")").fadeIn(100);
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-img").css("background-image","url(/ScienceFictionCity/image/"+this.bimg+")");
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-title").html(this.bName);
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-time").text(this.author);
							$(".project-list-wrapper .project-list-item:eq("+i+") .project-list-item-address").html(this.press);
							$(".project-list-wrapper .project-list-item:eq("+i+") .price").html(this.price);
							i++;
						})
					},
					error:function(){
						alert("!!!")
					}
				})
			}

			$(function () {
				bookTypeFun();
				pressFun();
				pageFun(0);
				pageCountFun();
				var paegNo = 1;
				$(".pageRight").click(function(){
					if((paegNo < parseInt($(".pageNum:last-child").html()))) {
						$(".project-list-item").fadeOut(300);
						paegNo++;
						pageFun(paegNo);
					}
				})

				$(".pageLeft").click(function(){
					if(paegNo > 1) {
						$(".project-list-item").fadeOut(300);
						paegNo--;
						pageFun(paegNo);
					}
				})

				$(document).on("click",".pageNum",function () {
					var num = $(this).html();
					var param;
					if($.isNumeric(num) && !(parseInt(num) == paegNo)) {
						param = parseInt(num);
					} else {
						return ;
					}
					if(countP >= 7) {
						if(param - 1 < 4 || countP - param < 4){
							if($(this).prevAll().length < 4 && param != 1 && $(this).next().html() != "..." && $(".pagination span:last-child").prev().prevAll().length < 5){
								$(".pagination span:last-child").prev().prev().after("<span class=\"pageNum\">" + (param + 2) + "</span>");
							} else if($(this).next().html() == "..."){
								for(var i = param+1; i <= param + 2; i++) {
									$(".pagination span:last-child").prev().prev().after("<span class=\"pageNum\">" + i + "</span>");
								}
							}
							if(param + 2 < countP){
								for(var i = param - 2; i <= param + 2; i++){

								}
							}
						}
					}
					$(".project-list-item").fadeOut(300);
					paegNo = param;
					pageFun(param);
				})

				$(document).on("click",".city-list li",function (){
					// selectBook($(this).html(),"全部",0,0);
				})
			})
		</script>
	</body>

</html>